@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<InoLibrary.Models.Publication>

@{
    Layout = "_layout";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <title>Index</title>
</head>
<body>

    <form method="post" asp-controller="Home" asp-action="Search">
        <div class="form-group">
            @Html.DropDownList("searchOption", new SelectList(new string[] { "Название", "Автор", "Год издания" }))
            <input name="searchString" class="form-control" />
            <input type="submit" value="Найти" class="btn btn-sm btn-primary" />
        </div>
    </form>
    <form method="post" asp-controller="Home" asp-action="Search">
        <input type="hidden" name="searchOption" value="Category" />
        <dl>
            @foreach (var category in ViewBag.CategoryMenu)
            {
            <dt>
                <input type="submit" name="searchString" value=@category.Name class="text-left"/>
                @category.Amount
            </dt>
            }
        </dl>
    </form>
    <table class="table">
        <tbody>
            @foreach (var publication in Model)
            {
                <tr>
                    <td>
                        @publication.Name
                    </td>
                    <td>
                        @publication.PublishingYear
                    </td>
                    <td>
                        @publication.User.Nickname
                    </td>
                    <td>
                        @foreach (var cat in publication.PublicationCategories)
                        {
                            <text>@cat.Category.Name, </text>
                        }
                    </td>
                    <td>
                        <a asp-action="ObservePublication" asp-controller="Publications" asp-route-id=@publication.Id>Открыть</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <a asp-action="Profile" asp-controller="Users">Профиль пользователя</a>
    <a asp-action="CreatePublication" asp-controller="Publications">Добавить публикацию</a>
</body>
</html>
